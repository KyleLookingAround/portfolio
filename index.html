<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gig Tracker</title>
    
    <!-- CSS Styles -->
    <style>
        /* CSS Variables for Theming */
        :root {
            --background-color: #ffffff;
            --text-color: #000000;
            --primary-color: #0d6efd;
            --secondary-color: #6c757d;
            --card-background: #f8f9fa;
            --border-color: #dee2e6;
            --error-color: #dc3545;
            --focus-color: var(--primary-color);
            --transition-speed: 0.3s;
        }

        /* Dark Mode Overrides */
        .dark-mode {
            --background-color: #121212;
            --text-color: #ffffff;
            --card-background: #1e1e1e;
            --border-color: #495057;
        }

        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            transition: background-color var(--transition-speed), color var(--transition-speed);
        }

        header {
            background-color: var(--primary-color);
            color: #ffffff;
            padding: 1.5rem;
            text-align: center;
        }

        main {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        h1, h2 {
            margin-bottom: 1rem;
        }

        /* Dark Mode Toggle */
        .dark-mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
        }

        /* Toggle Switch Styles */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: background-color var(--transition-speed);
            border-radius: 24px;
        }

        .slider::before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: transform var(--transition-speed);
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:checked + .slider::before {
            transform: translateX(26px);
        }

        /* Gig Tracker Section */
        #gig-tracker {
            background-color: var(--card-background);
            padding: 2rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: background-color var(--transition-speed), border-color var(--transition-speed);
        }

        /* Search Bar */
        .search-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 1rem;
        }

        .search-bar input {
            flex: 1;
            padding: 0.5rem;
            font-size: 1rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
        }

        .search-bar input:focus {
            border-color: var(--focus-color);
            outline: none;
            box-shadow: 0 0 5px var(--focus-color);
        }

        .search-bar button {
            padding: 0.5rem 1rem;
            font-size: 1rem;
            background-color: var(--secondary-color);
            color: #ffffff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color var(--transition-speed);
        }

        .search-bar button:hover {
            background-color: #5a6268; /* Darkened secondary color */
        }

        /* Tabs */
        .gig-tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .gig-tab {
            padding: 0.5rem 1rem;
            background-color: var(--secondary-color);
            color: #ffffff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color var(--transition-speed), color var(--transition-speed);
        }

        .gig-tab.active, .gig-tab:hover {
            background-color: var(--primary-color);
            color: #ffffff;
        }

        /* Gig Lists */
        .gig-list-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .gig-list {
            display: none; /* Hide all gig lists by default */
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .gig-list.active {
            display: grid; /* Show only the active gig list */
        }

        .gig-card {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            transition: background-color var(--transition-speed), border-color var(--transition-speed);
        }

        .gig-card__date {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .gig-card__description {
            margin-bottom: 0.5rem;
        }

        .gig-card__location {
            font-style: italic;
            color: var(--secondary-color);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .gig-tabs {
                flex-direction: column;
                align-items: center;
            }
        }

        @media (max-width: 480px) {
            .gig-tab {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Dark Mode Toggle -->
    <div class="dark-mode-toggle">
        <label class="switch" aria-label="Toggle Dark Mode">
            <input type="checkbox" id="darkModeSwitch">
            <span class="slider"></span>
        </label>
    </div>

    <!-- Header Section -->
    <header>
        <h1>Gig Tracker</h1>
    </header>

    <!-- Main Content -->
    <main>
        <section id="gig-tracker">
            <h2>Manage Your Gigs</h2>
            <!-- Search Bar -->
            <div class="search-bar">
                <input type="text" id="gigSearch" placeholder="Search by location..." aria-label="Search gigs by location">
                <button id="clearSearchBtn">Clear Search</button>
            </div>
            <!-- Tabs -->
            <div class="gig-tabs" id="gigTabsContainer">
                <!-- Tabs will be dynamically generated here -->
            </div>
            <!-- Gig Lists -->
            <div class="gig-list-container" id="gigListContainer">
                <!-- Gig lists will be dynamically generated here -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer style="text-align:center; padding:1rem; background-color:var(--card-background); border-top:1px solid var(--border-color);">
        &copy; <span id="year"></span> Gig Tracker. All rights reserved.
    </footer>

    <!-- JSON Data for Gigs -->
    <script id="gigData" type="application/json">
    {
        "gigs": [
            {"date":"2024-06-10","location":"Ritz","description":"Mt. Joy","type":"gig"},
            {"date":"2024-07-10","location":"Co-Op","description":"Kings of Leon","type":"gig"},
            {"date":"2024-08-08","location":"","description":"Pete Doherty","type":"gig"},
            {"date":"2024-10-05","location":"Manchester","description":"Neighbourhood Festival: Red Rum Club, Brooke Combe, Antony Szmierek","type":"festival"},
            {"date":"2024-08-24","location":"Wythenshawe Park","description":"New Order + Johnny Marr","type":"festival"},
            {"date":"2024-08-25","location":"Wythenshawe Park","description":"Blossoms","type":"festival"},
            {"date":"2024-09-01","location":"Apollo","description":"girl in red","type":"gig"},
            {"date":"2024-09-28","location":"Apollo","description":"Sea Girls","type":"gig"},
            {"date":"2024-10-01","location":"Albert Hall","description":"The Struts","type":"gig"},
            {"date":"2024-10-02","location":"Apollo","description":"Driver Era","type":"gig"},
            {"date":"2024-10-04","location":"Apollo","description":"Aurora","type":"gig"},
            {"date":"2024-10-11","location":"New Century Hall","description":"Saint Motel","type":"gig"},
            {"date":"2024-10-15","location":"Yes Basement","description":"Leap","type":"gig"},
            {"date":"2024-11-02","location":"Co-Op","description":"Glass Animals","type":"gig"},
            {"date":"2024-11-04","location":"Plaza Stockport","description":"Blossoms","type":"gig"},
            {"date":"2024-11-07","location":"Yes Basement","description":"Jack Jones","type":"gig"},
            {"date":"2024-11-20","location":"Ritz","description":"Blossoms","type":"gig"},
            {"date":"2024-12-07","location":"Apollo/YES","description":"Idles + Idles DJ set","type":"gig"},
            {"date":"2024-12-16","location":"Co-Op","description":"Paul Heaton","type":"gig"},
            {"date":"2025-02-14","location":"Apollo","description":"Cage the Elephant","type":"gig"},
            {"date":"2025-03-02","location":"Stockport","description":"You Are Not Alone Festival","type":"festival"},
            {"date":"2025-04-18","location":"Apollo","description":"Finneas","type":"gig"},
            {"date":"2025-06-15","location":"Manchester, Tennessee","description":"Bonnaroo","type":"festival"},
            {"date":"2025-07-05","location":"Finsbury Park","description":"Fontaines D.C.","type":"gig"}
        ]
    }
    </script>

    <!-- JavaScript for Functionality -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Footer Year
            document.getElementById('year').textContent = new Date().getFullYear();

            // Dark Mode Toggle
            const body = document.body;
            const darkModeSwitch = document.getElementById('darkModeSwitch');
            const storedDarkMode = localStorage.getItem('darkMode') === 'true';

            if (storedDarkMode) {
                body.classList.add('dark-mode');
                darkModeSwitch.checked = true;
            }

            darkModeSwitch.addEventListener('change', () => {
                const isDark = darkModeSwitch.checked;
                body.classList.toggle('dark-mode', isDark);
                localStorage.setItem('darkMode', isDark);
            });

            // Load Gig Data
            const gigData = JSON.parse(document.getElementById('gigData').textContent).gigs;

            // Function to parse year from date string
            const getYear = (dateStr) => new Date(dateStr).getFullYear();

            // Group gigs by year and type
            const gigsByYear = {};

            gigData.forEach(gig => {
                const year = getYear(gig.date);
                if (!gigsByYear[year]) {
                    gigsByYear[year] = { gigs: [], festivals: [] };
                }
                if (gig.type === 'gig') {
                    gigsByYear[year].gigs.push(gig);
                } else if (gig.type === 'festival') {
                    gigsByYear[year].festivals.push(gig);
                }
            });

            // Get sorted years
            const years = Object.keys(gigsByYear).map(Number).sort((a, b) => a - b);

            // Generate Tabs
            const gigTabsContainer = document.getElementById('gigTabsContainer');
            const gigListContainer = document.getElementById('gigListContainer');

            years.forEach((year, index) => {
                // Create Tab Button
                const tabButton = document.createElement('button');
                tabButton.classList.add('gig-tab');
                if (index === 0) tabButton.classList.add('active');
                tabButton.textContent = year;
                tabButton.setAttribute('data-year', year);
                gigTabsContainer.appendChild(tabButton);

                // Create Gig List Container
                const gigList = document.createElement('div');
                gigList.classList.add('gig-list');
                if (index === 0) gigList.classList.add('active');
                gigList.id = `year-${year}`;

                // Add Gigs Section
                if (gigsByYear[year].gigs.length > 0) {
                    const gigsHeader = document.createElement('h3');
                    gigsHeader.textContent = 'Gigs';
                    gigList.appendChild(gigsHeader);

                    gigsByYear[year].gigs.forEach(gig => {
                        const gigCard = document.createElement('div');
                        gigCard.classList.add('gig-card');

                        const gigDate = document.createElement('p');
                        gigDate.classList.add('gig-card__date');
                        gigDate.textContent = formatDate(gig.date);

                        const gigDescription = document.createElement('p');
                        gigDescription.classList.add('gig-card__description');
                        gigDescription.textContent = gig.description;

                        gigCard.appendChild(gigDate);
                        gigCard.appendChild(gigDescription);

                        if (gig.location) {
                            const gigLocation = document.createElement('p');
                            gigLocation.classList.add('gig-card__location');
                            gigLocation.innerHTML = `<strong>Location:</strong> ${gig.location}`;
                            gigCard.appendChild(gigLocation);
                        }

                        gigList.appendChild(gigCard);
                    });
                }

                // Add Festivals Section
                if (gigsByYear[year].festivals.length > 0) {
                    const festivalsHeader = document.createElement('h3');
                    festivalsHeader.textContent = 'Festivals';
                    gigList.appendChild(festivalsHeader);

                    gigsByYear[year].festivals.forEach(festival => {
                        const festivalCard = document.createElement('div');
                        festivalCard.classList.add('gig-card');

                        const festDate = document.createElement('p');
                        festDate.classList.add('gig-card__date');
                        festDate.textContent = formatDate(festival.date);

                        const festDescription = document.createElement('p');
                        festDescription.classList.add('gig-card__description');
                        festDescription.textContent = festival.description;

                        festivalCard.appendChild(festDate);
                        festivalCard.appendChild(festDescription);

                        if (festival.location) {
                            const festLocation = document.createElement('p');
                            festLocation.classList.add('gig-card__location');
                            festLocation.innerHTML = `<strong>Location:</strong> ${festival.location}`;
                            festivalCard.appendChild(festLocation);
                        }

                        gigList.appendChild(festivalCard);
                    });
                }

                gigListContainer.appendChild(gigList);
            });

            // Format Date Function
            function formatDate(dateStr) {
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                const date = new Date(dateStr);
                return date.toLocaleDateString(undefined, options);
            }

            // Tab Switching Functionality
            const gigTabs = document.querySelectorAll('.gig-tab');
            const gigLists = document.querySelectorAll('.gig-list');

            gigTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs
                    gigTabs.forEach(t => t.classList.remove('active'));
                    // Hide all gig lists
                    gigLists.forEach(list => list.classList.remove('active'));
                    // Add active class to clicked tab
                    tab.classList.add('active');
                    // Show corresponding gig list
                    const year = tab.getAttribute('data-year');
                    document.getElementById(`year-${year}`).classList.add('active');
                });
            });

            // Search Functionality
            const gigSearch = document.getElementById('gigSearch');
            const clearSearchBtn = document.getElementById('clearSearchBtn');

            gigSearch.addEventListener('input', () => {
                const query = gigSearch.value.toLowerCase();
                const activeList = document.querySelector('.gig-list.active');

                // If no active list, do nothing
                if (!activeList) return;

                // Get all gig cards within the active list
                const gigCards = activeList.querySelectorAll('.gig-card');

                gigCards.forEach(card => {
                    const location = card.querySelector('.gig-card__location');
                    const locationText = location ? location.textContent.toLowerCase() : '';
                    if (locationText.includes(query)) {
                        card.style.display = '';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });

            clearSearchBtn.addEventListener('click', () => {
                gigSearch.value = '';
                const activeList = document.querySelector('.gig-list.active');
                if (!activeList) return;

                const gigCards = activeList.querySelectorAll('.gig-card');
                gigCards.forEach(card => {
                    card.style.display = '';
                });
            });
        </script>
</body>
</html>
